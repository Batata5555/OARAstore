<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OARA STORE | ÙØ®Ø§Ù…Ø© ØªÙ„ÙŠÙ‚ Ø¨Ùƒ</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/VWVm0Ym/1000139044.jpg">
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,wght@1,400&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --black: #000; --dark: #0a0a0a; --soft-gold: rgba(212, 175, 55, 0.1); }
        body { font-family: 'Tajawal', sans-serif; margin: 0; background: var(--black); color: #fff; overflow-x: hidden; scroll-behavior: smooth; }
        
        header { background: rgba(0,0,0,0.95); padding: 10px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--gold); position: sticky; top: 0; z-index: 1000; backdrop-filter: blur(10px); }
        .logo-img { height: 50px; cursor: pointer; }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        .sidebar { position: fixed; right: -280px; top: 0; width: 280px; height: 100%; background: var(--dark); border-left: 1px solid var(--gold); z-index: 3000; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); padding: 20px; box-sizing: border-box; }
        .sidebar.active { right: 0; }
        .sidebar-item { padding: 15px; border-bottom: 1px solid #1a1a1a; color: #fff; display: flex; align-items: center; gap: 10px; cursor: pointer; transition: 0.3s; }
        .sidebar-item:hover { color: var(--gold); background: var(--soft-gold); }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 2500; display: none; }
        .overlay.active { display: block; }

        /* Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† */
        .view-section { animation: fadeIn 0.6s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* ÙƒØ±Øª Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ù„Ø¨ÙˆØ±ØªØ±ÙŠÙ‡ */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 12px; }
        .product-card { background: #050505; border: 1px solid #1a1a1a; text-align: center; border-radius: 8px; overflow: hidden; }
        .img-container { position: relative; height: 220px; overflow: hidden; }
        .img-container::after { content: ''; position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 50%); }
        .product-card img { width: 100%; height: 100%; object-fit: cover; }
        
        .btn { background: var(--gold); color: #000; border: none; padding: 12px; width: 100%; font-weight: bold; cursor: pointer; font-family: 'Tajawal'; }
        
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 4000; display: none; align-items: center; justify-content: center; padding: 20px; }
        .modal.active { display: flex; }
        .modal-content { background: var(--dark); border: 1px solid var(--gold); padding: 25px; border-radius: 12px; width: 100%; max-width: 400px; position: relative; }
        .close-btn { position: absolute; left: 15px; top: 15px; color: var(--gold); cursor: pointer; }
        
        .pay-badge { font-size: 11px; color: var(--gold); border: 1px solid var(--gold); padding: 2px 8px; border-radius: 10px; margin: 5px; display: inline-block; }
    </style>
</head>
<body>

<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>
<div class="sidebar" id="sidebar">
    <div class="close-btn" onclick="toggleSidebar()">âœ•</div>
    <div style="margin-top: 50px;">
        <div class="sidebar-item" onclick="location.reload()">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
        <div class="sidebar-item" onclick="openWhatsApp()">ğŸ“ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
        <div class="sidebar-item" onclick="openModal('lang-modal')">ğŸŒ Ø§Ù„Ù„ØºØ© / Language</div>
        <div class="sidebar-item" onclick="openModal('login-modal')">ğŸ‘¤ Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</div>
    </div>
</div>

<header>
    <div onclick="toggleSidebar()" style="color:var(--gold); font-size:28px; cursor:pointer;">â˜°</div>
    <img src="https://i.ibb.co/VWVm0Ym/1000139044.jpg" class="logo-img" onclick="location.reload()">
    <div onclick="openModal('checkout-modal')" style="color:var(--gold); font-size:24px; position:relative; cursor:pointer;">
        ğŸ›’ <span id="cart-count" style="position:absolute; top:-5px; right:-10px; background:var(--gold); color:#000; font-size:10px; padding:2px 6px; border-radius:50%;">0</span>
    </div>
</header>

<div id="main-view" class="view-section">
    <section style="padding:40px 10%; text-align:center;">
        <h2 style="font-family:'Bodoni Moda', serif; color:var(--gold); font-style:italic;">"ÙØ®Ø§Ù…Ø© ØªÙ„ÙŠÙ‚ Ø¨Ù…ÙƒØ§Ù†ØªÙƒ"</h2>
    </section>
    <div class="grid">
        <div class="product-card" onclick="loadCategory('Ø¹Ø·ÙˆØ±')"><div class="img-container"><img src="https://images.pexels.com/photos/965989/pexels-photo-965989.jpeg?w=400"></div><div style="padding:10px; color:var(--gold);">Ø¹Ø·ÙˆØ±</div></div>
        <div class="product-card" onclick="loadCategory('Ø³Ø§Ø¹Ø§Øª')"><div class="img-container"><img src="https://images.pexels.com/photos/190819/pexels-photo-190819.jpeg?w=400"></div><div style="padding:10px; color:var(--gold);">Ø³Ø§Ø¹Ø§Øª</div></div>
        <div class="product-card" onclick="loadCategory('Ù…Ù„Ø§Ø¨Ø³')"><div class="img-container"><img src="https://images.pexels.com/photos/996329/pexels-photo-996329.jpeg?w=400"></div><div style="padding:10px; color:var(--gold);">Ù…Ù„Ø§Ø¨Ø³</div></div>
        <div class="product-card" onclick="loadCategory('Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª')"><div class="img-container"><img src="https://images.pexels.com/photos/356056/pexels-photo-356056.jpeg?w=400"></div><div style="padding:10px; color:var(--gold);">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</div></div>
    </div>
</div>

<div id="category-view" class="view-section" style="display:none; padding-bottom:50px;">
    <div onclick="hideCategory()" style="color:var(--gold); padding:15px; cursor:pointer; text-align:center;">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</div>
    <div class="grid" id="products-list"></div>
</div>

<div class="modal" id="lang-modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModals()">âœ•</span>
        <h3 style="color:var(--gold); text-align:center;">Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ© / Select Language</h3>
        <button class="btn" style="margin-bottom:10px;" onclick="closeModals()">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
        <button class="btn" style="background:transparent; color:var(--gold); border:1px solid var(--gold);" onclick="alert('English will be available soon')">English</button>
    </div>
</div>

<div class="modal" id="checkout-modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModals()">âœ•</span>
        <h3 style="color:var(--gold); text-align:center;">Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h3>
        <div id="cart-items-list" style="max-height:150px; overflow-y:auto; margin-bottom:15px; border-bottom:1px solid #222;"></div>
        
        <div style="text-align:center; margin-bottom:15px;">
            <p style="font-size:12px; color:#888;">Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…ØªÙˆÙØ±Ø©:</p>
            <span class="pay-badge">ÙƒØ§Ø´ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</span>
            <span class="pay-badge">Ø²ÙŠÙ† ÙƒØ§Ø´</span>
            <span class="pay-badge">ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ</span>
        </div>

        <input type="text" id="order-city" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„">
        <button class="btn" onclick="sendWhatsApp()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
    </div>
</div>

<div class="modal" id="login-modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModals()">âœ•</span>
        <h3 style="color:var(--gold); text-align:center;">Ù…Ù„Ù Ø§Ù„Ù†Ø®Ø¨Ø©</h3>
        <input type="text" id="reg-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
        <button class="btn" onclick="saveProfile()">Ø­ÙØ¸</button>
    </div>
</div>

<script>
    let cart = [], storeData = [];
    
    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('active');
        document.getElementById('overlay').classList.toggle('active');
    }

    function openWhatsApp() {
        window.open("https://wa.me/972568486065?text=Ù…Ø±Ø­Ø¨Ø§Ù‹ OARA STOREØŒ Ø£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.");
    }

    async function fetchProducts() {
        try {
            const res = await fetch("https://docs.google.com/spreadsheets/d/1nOwLwJqkusxCoRDYSMyjxoV6PHm4AB1lp35NEuyTZ70/gviz/tq?tqx=out:json");
            const text = await res.text();
            const data = JSON.parse(text.substring(47).slice(0, -2));
            storeData = data.table.rows.map(r => ({ 
                name: r.c[0]?.v, price: (parseFloat(r.c[1]?.v) || 0), img: r.c[2]?.v, cat: (r.c[3]?.v || '').trim() 
            }));
        } catch(e) { console.log("Error fetching data"); }
    }

    function loadCategory(cat) {
        history.pushState({view: 'category'}, "");
        document.getElementById('main-view').style.display = 'none';
        document.getElementById('category-view').style.display = 'block';
        const list = document.getElementById('products-list');
        list.innerHTML = storeData.filter(p => p.cat === cat).map(p => `
            <div class="product-card view-section">
                <div class="img-container">
                    <img src="${p.img}" onerror="this.src='https://i.ibb.co/VWVm0Ym/1000139044.jpg'">
                </div>
                <div style="padding:8px; font-size:14px;">${p.name}</div>
                <div style="color:var(--gold); font-weight:bold; padding-bottom:8px;">${p.price} â‚ª</div>
                <button class="btn" onclick="addToCart('${p.name}', ${p.price})">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
            </div>`).join('');
        window.scrollTo(0,0);
    }

    function hideCategory() {
        document.getElementById('main-view').style.display = 'block';
        document.getElementById('category-view').style.display = 'none';
    }

    function addToCart(n, p) { 
        cart.push({name: n, price: p}); 
        document.getElementById('cart-count').innerText = cart.length; 
        const itemDiv = document.createElement('div');
        itemDiv.style.padding = "5px";
        itemDiv.style.fontSize = "13px";
        itemDiv.innerText = "â— " + n + " - " + p + " â‚ª";
        document.getElementById('cart-items-list').appendChild(itemDiv);
        alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©"); 
    }

    function openModal(id) { 
        if(id === 'sidebar') toggleSidebar();
        document.getElementById(id).classList.add('active'); 
    }
    
    function closeModals() { 
        document.querySelectorAll('.modal').forEach(m => m.classList.remove('active')); 
        if (document.getElementById('sidebar').classList.contains('active')) toggleSidebar();
    }

    function sendWhatsApp() {
        if(!cart.length) return alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
        let msg = "Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† OARA STORE:%0A" + cart.map(i => "- " + i.name + " (" + i.price + " â‚ª)").join("%0A");
        let total = cart.reduce((s, i) => s + i.price, 0);
        window.open(`https://wa.me/972568486065?text=${msg}%0A%0AØ§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total} â‚ª%0AØ§Ù„Ø¹Ù†ÙˆØ§Ù†: ${document.getElementById('order-city').value}`);
    }

    window.onpopstate = () => { hideCategory(); closeModals(); };
    window.onload = fetchProducts;
</script>
</body>
</html>
