<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OARA STORE | Luxury Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:wght@400;700&family=Tajawal:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root { --gold: #c5a059; --black: #050505; --card: #0f0f0f; --sale: #e74c3c; }
        body { font-family: 'Tajawal', sans-serif; margin: 0; background: var(--black); color: white; line-height: 1.6; }
        header { background: rgba(5,5,5,0.9); padding: 15px 5%; text-align: center; border-bottom: 1px solid #1a1a1a; position: sticky; top: 0; z-index: 1000; backdrop-filter: blur(8px); }
        .logo { font-family: 'Bodoni Moda', serif; font-size: 26px; letter-spacing: 4px; color: white; text-decoration: none; font-weight: 700; text-transform: uppercase; }
        .logo span { color: var(--gold); }
        .hero { padding: 40px 10% 20px; text-align: center; }
        .hero h1 { font-family: 'Bodoni Moda', serif; font-size: 30px; color: var(--gold); margin: 0 0 10px; }
        .categories-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 20px 5%; }
        @media (min-width: 768px) { .categories-grid { grid-template-columns: repeat(4, 1fr); gap: 20px; } }
        .cat-card { height: 200px; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; cursor: pointer; border: 1px solid #1a1a1a; background: #111; }
        .cat-card::before { content: ""; position: absolute; inset: 0; background-size: cover; background-position: center; filter: brightness(0.4); transition: 0.4s; }
        .cat-1::before { background-image: url('https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=400'); }
        .cat-2::before { background-image: url('https://images.unsplash.com/photo-1541643600914-78b084683601?w=400'); }
        .cat-3::before { background-image: url('https://images.unsplash.com/photo-1524592094714-0f0654e20314?w=400'); }
        .cat-4::before { background-image: url('https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=400'); }
        .cat-card span { position: relative; z-index: 2; color: var(--gold); border: 1px solid var(--gold); padding: 6px 15px; background: rgba(0,0,0,0.4); }
        #products-view { display: none; padding: 20px 5%; }
        .product-card { background: var(--card); border: 1px solid #1a1a1a; text-align: center; padding-bottom: 12px; position: relative; }
        .product-card img { width: 100%; height: 220px; object-fit: cover; }
        .badge { position: absolute; top: 10px; right: 10px; background: var(--sale); color: white; padding: 2px 8px; font-size: 10px; font-weight: bold; border-radius: 3px; }
        .product-info h4 { font-weight: 300; font-size: 14px; margin: 10px 5px 5px; color: #eee; height: 40px; overflow: hidden; }
        .price-container { display: flex; flex-direction: column; align-items: center; }
        .old-price { color: #888; text-decoration: line-through; font-size: 12px; }
        .current-price { color: var(--gold); font-family: 'Bodoni Moda'; font-size: 18px; font-weight: bold; }
        .btn-buy { background: var(--gold); color: black; border: none; padding: 8px 15px; margin-top: 10px; font-weight: bold; cursor: pointer; width: 85%; }
        .back-nav { cursor: pointer; font-size: 12px; color: var(--gold); margin-bottom: 20px; display: inline-block; }
    </style>
</head>
<body>

<header><a href="javascript:location.reload()" class="logo">OARA <span>STORE</span></a></header>

<div id="home-view">
    <section class="hero"><p>Exclusive Collection</p><h1>OARA STORE</h1></section>
    <div class="categories-grid">
        <div class="cat-card cat-1" onclick="loadCategory('ملابس')"><span>ملابس</span></div>
        <div class="cat-card cat-2" onclick="loadCategory('عطور')"><span>عطور</span></div>
        <div class="cat-card cat-3" onclick="loadCategory('ساعات')"><span>ساعات</span></div>
        <div class="cat-card cat-4" onclick="loadCategory('اكسسوارات')"><span>إكسسوارات</span></div>
    </div>
</div>

<section id="products-view">
    <div class="back-nav" onclick="location.reload()">← العودة للأقسام</div>
    <div id="products-container" class="categories-grid" style="padding:0;"></div>
</section>

<script>
    // تم ربط جدولك الخاص بنجاح
    const SHEET_URL = "https://docs.google.com/spreadsheets/d/1nOwLwJqkusxCoRDYSMyjxoV6PHm4AB1lp35NEuyTZ70/gviz/tq?tqx=out:json";
    let storeData = [];

    async function fetchStore() {
        try {
            const response = await fetch(SHEET_URL);
            const text = await response.text();
            // استخراج JSON من استجابة جوجل
            const json = JSON.parse(text.substring(47).slice(0, -2));
            
            storeData = json.table.rows.map(row => {
                const wholesalePrice = parseFloat(row.c[1]?.v) || 0;
                return {
                    name: row.c[0]?.v || 'منتج جديد',
                    price: wholesalePrice + 20, // إضافة ربح 20 شيكل
                    oldPrice: wholesalePrice + 50, // سعر قبل التخفيض
                    img: row.c[2]?.v || 'https://via.placeholder.com/400',
                    cat: row.c[3]?.v ? row.c[3].v.toString().trim() : ''
                };
            });
        } catch (e) { console.error("خطأ في جلب البيانات من الجدول"); }
    }

    function loadCategory(catName) {
        document.getElementById('home-view').style.display = 'none';
        document.getElementById('products-view').style.display = 'block';
        const container = document.getElementById('products-container');
        
        const filtered = storeData.filter(p => p.cat === catName);
        
        if(filtered.length === 0) {
            container.innerHTML = `<p style="text-align:center; width:100%; color:#888; grid-column: 1/-1; padding: 50px 0;">قريباً.. سيتم إضافة منتجات في هذا القسم</p>`;
            return;
        }

        container.innerHTML = filtered.map(p => `
            <div class="product-card">
                <div class="badge">تخفيض</div>
                <img src="${p.img}" onerror="this.src='https://via.placeholder.com/400'" loading="lazy">
                <div class="product-info">
                    <h4>${p.name}</h4>
                    <div class="price-container">
                        <span class="old-price">${p.oldPrice} ₪</span>
                        <span class="current-price">${p.price} ₪</span>
                    </div>
                    <button class="btn-buy" onclick="sendOrder('${p.name}')">اطلب عبر واتساب</button>
                </div>
            </div>
        `).join('');
    }

    function sendOrder(product) {
        const phone = "970568486065"; 
        const text = encodeURIComponent(`مرحباً OARA STORE، أريد طلب المنتج التالي: ${product}`);
        window.open(`https://wa.me/${phone}?text=${text}`);
    }

    window.onload = fetchStore;
</script>
</body>
</html>
