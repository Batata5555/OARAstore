<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OARA STORE | ÙØ®Ø§Ù…Ø© Ø§Ù„Ù†Ø®Ø¨Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --black: #000000; --dark: #0a0a0a; --gray: #1a1a1a; }
        body { background: var(--black); color: #fff; font-family: 'Amiri', serif; margin: 0; padding: 0; overflow-x: hidden; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        header { 
            background: rgba(0,0,0,0.95); 
            padding: 15px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid var(--gold); 
            position: sticky; 
            top: 0; 
            z-index: 1000; 
        }
        .logo { font-family: 'Cinzel', serif; font-size: 24px; color: var(--gold); cursor: pointer; text-shadow: 0 0 10px rgba(212,175,55,0.3); }
        
        /* Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .hero { 
            position: relative; 
            height: 350px; 
            background: linear-gradient(to bottom, rgba(0,0,0,0.7), var(--black)), url('https://images.unsplash.com/photo-1547996160-81dfa63595aa?q=80&w=1000') center/cover; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            text-align: center; 
            border-bottom: 2px solid var(--gold); 
        }
        .hero-content { z-index: 2; padding: 20px; width: 100%; }
        
        /* Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± */
        #main-search { 
            width: 80%; 
            max-width: 400px; 
            background: rgba(255,255,255,0.05); 
            border: 1px solid var(--gold); 
            color: #fff; 
            padding: 12px; 
            border-radius: 25px; 
            text-align: center;
            outline: none;
        }
        .btn-gold { 
            background: linear-gradient(45deg, #b8860b, var(--gold)); 
            color: #000 !important; 
            border: none; 
            padding: 10px 20px; 
            font-weight: bold; 
            border-radius: 5px; 
            cursor: pointer; 
            transition: 0.3s;
        }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .category-scroll { display: flex; overflow-x: auto; gap: 15px; padding: 20px; scrollbar-width: none; }
        .cat-card { 
            min-width: 90px; 
            height: 90px; 
            background: var(--gray); 
            border: 1px solid var(--gold); 
            border-radius: 50%; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            font-size: 13px; 
            cursor: pointer; 
        }

        /* Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; }
        .card-luxury { background: var(--dark); border: 1px solid #222; border-radius: 12px; overflow: hidden; transition: 0.3s; position: relative; text-align: center; }
        .card-luxury img { width: 100%; height: 180px; object-fit: cover; border-bottom: 1px solid var(--gold); }
        
        /* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        .sidebar { 
            position: fixed; 
            top: 0; 
            right: -320px; 
            width: 300px; 
            height: 100%; 
            background: #050505; 
            z-index: 2000; 
            transition: 0.4s; 
            padding: 20px; 
            border-left: 1px solid var(--gold); 
            box-sizing: border-box;
        }
        .sidebar.active { right: 0; }
        
        /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
        .toast { 
            position: fixed; 
            bottom: 20px; 
            left: 50%; 
            transform: translateX(-50%); 
            background: var(--gold); 
            color: #000; 
            padding: 10px 25px; 
            border-radius: 30px; 
            z-index: 9999; 
            font-weight: bold; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
        .modal { 
            display: none; 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            width: 90%; 
            max-width: 400px; 
            background: #0d0d0d; 
            border: 1px solid var(--gold); 
            padding: 25px; 
            z-index: 3000; 
            border-radius: 15px;
        }
        input, select { width: 100%; background: #111; border: 1px solid #333; color: #fff; padding: 12px; margin: 10px 0; border-radius: 8px; }
    </style>
</head>
<body>

<header>
    <div onclick="toggleSidebar()" style="font-size: 25px; cursor: pointer; color: var(--gold);">â˜°</div>
    <div class="logo" onclick="location.reload()">OARA</div>
    <div onclick="toggleCart()" style="position: relative; cursor: pointer; font-size: 22px;">
        ğŸ›’ <span id="cart-count" style="background: red; color: white; border-radius: 50%; padding: 2px 7px; font-size: 11px; position: absolute; top: -5px; right: -10px;">0</span>
    </div>
</header>

<div id="home-view">
    <section class="hero">
        <div class="hero-content">
            <h1 style="font-family: 'Cinzel'; font-size: 38px; color: var(--gold); margin-bottom: 10px;">OARA LUXURY</h1>
            <p style="letter-spacing: 2px; opacity: 0.8; margin-bottom: 20px;">Ù†ÙØ®Ø¨Ø© Ø§Ù„ÙØ®Ø§Ù…Ø© ÙÙŠ ÙŠØ¯ÙŠÙƒ</p>
            <input type="text" id="main-search" onkeyup="window.liveSearch()" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù‚Ø·Ø¹Ø© Ù†Ø§Ø¯Ø±Ø©...">
        </div>
    </section>

    <div class="category-scroll">
        <div class="cat-card" onclick="window.openCategory('Ø³Ø§Ø¹Ø§Øª')">âŒš<br>Ø³Ø§Ø¹Ø§Øª</div>
        <div class="cat-card" onclick="window.openCategory('Ø¹Ø·ÙˆØ±')">âœ¨<br>Ø¹Ø·ÙˆØ±</div>
        <div class="cat-card" onclick="window.openCategory('Ù†Ø¸Ø§Ø±Ø§Øª')">ğŸ•¶ï¸<br>Ù†Ø¸Ø§Ø±Ø§Øª</div>
        <div class="cat-card" onclick="window.openCategory('Ø­Ù‚Ø§Ø¦Ø¨')">ğŸ‘œ<br>Ø­Ù‚Ø§Ø¦Ø¨</div>
        <div class="cat-card" onclick="window.openCategory('Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª')">ğŸ’<br>Ø£Ø®Ø±Ù‰</div>
    </div>

    <h3 style="padding: 0 20px; color: var(--gold);">ÙˆØµÙ„Ù†Ø§ Ø­Ø¯ÙŠØ«Ø§Ù‹</h3>
    <div id="main-products" class="product-grid"></div>
</div>

<div id="sidebar" class="sidebar">
    <h2 class="logo" style="text-align: center; margin-bottom: 30px;">OARA MENU</h2>
    <div style="display: flex; flex-direction: column; gap: 20px; font-size: 18px;">
        <div onclick="location.reload()" style="cursor: pointer;">ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
        <div onclick="window.renderReviews()" style="cursor: pointer;">â­ Ø¢Ø±Ø§Ø¡ Ø§Ù„Ù†Ø®Ø¨Ø©</div>
        <div onclick="window.openAuth()" style="cursor: pointer;">ğŸ‘¤ Ø­Ø³Ø§Ø¨ÙŠ</div>
        <div onclick="toggleSidebar()" style="margin-top: 50px; color: var(--gold); text-align: center;">âœ• Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</div>
    </div>
</div>

<div id="cart-sidebar" class="sidebar" style="right: auto; left: -320px; border-left: none; border-right: 1px solid var(--gold); display: flex; flex-direction: column;">
    <h2 style="color: var(--gold); border-bottom: 1px solid #222; padding-bottom: 10px;">Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
    <div id="cart-items-wrapper" style="flex: 1; overflow-y: auto; margin-bottom: 20px;"></div>
    <div style="border-top: 1px solid var(--gold); padding-top: 15px;">
        <p style="display: flex; justify-content: space-between;"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span> <span id="cart-total-price">0 ILS</span></p>
        <input type="text" id="ship-city" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©">
        <input type="text" id="ship-village" placeholder="Ø§Ù„Ù‚Ø±ÙŠØ© / Ø§Ù„Ø´Ø§Ø±Ø¹">
        <button class="btn-gold" style="width: 100%; padding: 15px;" onclick="window.completeOrder()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ (WhatsApp)</button>
        <p onclick="toggleCart()" style="text-align: center; cursor: pointer; margin-top: 15px; opacity: 0.6;">Ø¥ØºÙ„Ø§Ù‚</p>
    </div>
</div>

<div id="auth-modal" class="modal">
    <h2 style="color: var(--gold); text-align: center;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø®Ø¨Ø©</h2>
    <input type="email" id="user-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Gmail)">
    <input type="tel" id="user-tel" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨">
    <button class="btn-gold" style="width: 100%;" onclick="window.submitAuth()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
    <p onclick="window.closeAuth()" style="text-align: center; cursor: pointer; margin-top: 15px;">Ø¥Ù„ØºØ§Ø¡</p>
</div>

<div id="toast-container"></div>

<script>
    /* 1. Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
    const SHEET_ID = '1nOwLwJqkusxCoRDYSMyjxoV6PHm4AB1lp35NEuyTZ70'; 
    const SHEET_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json`;

    let allProducts = []; 
    let cart = JSON.parse(localStorage.getItem('oara_cart')) || [];
    let user = JSON.parse(localStorage.getItem('oara_user')) || null;

    /* 2. Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ù€ 40 */
    const allReviews = [
        { n: "Ø£Ø¨Ùˆ Ø§Ù„Ø¹Ø¨Ø¯ - ØºØ²Ø©", r: 5, t: "ÙˆØ§Ù„Ù„Ù‡ Ø§Ù„Ù‚Ø·Ø¹Ø© Ø¨ØªØ¬Ù†Ù†ØŒ Ø§Ø´ÙŠ ÙØ§Ø®Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¢Ø®Ø±ØŒ Ø¨Ø¶Ø§Ø¹Ø© Ø¨ØªØ¨ÙŠØ¶ Ø§Ù„ÙˆØ¬Ù‡." },
        { n: "Ø³Ø§Ø±Ø© - Ø§Ù„Ù‚Ø¯Ø³", r: 5, t: "Ø±ÙŠØ­Ø© Ø§Ù„Ø¹Ø·Ø± Ø¨ØªÙˆØ®Ø¯ Ø§Ù„Ø¹Ù‚Ù„ØŒ ÙˆØ§Ù„ÙƒÙ„ Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù†Ù‡Ø§ Ø¨Ø¬Ø¯ ÙØ®Ø§Ù…Ø©." },
        { n: "Ø±Ø§Ø¦Ø¯ - Ø§Ù„Ø®Ù„ÙŠÙ„", r: 5, t: "Ø¨Ø¶Ø§Ø¹Ø© Ø®Ù„ÙŠÙ„ÙŠØ© Ø£ØµÙ„ÙŠØ© Ù…ÙŠØ© Ù…ÙŠØ©ØŒ Ø§Ù„Ø³Ø§Ø¹Ø© Ø¨ØªØ¬Ù†Ù† ÙˆØ§Ù„ÙƒÙ„ Ø§Ù†Ù‡Ø¨Ù„ Ø¹Ù„ÙŠÙ‡Ø§." },
        { n: "Ø£Ù…ÙŠØ± - Ù†Ø§Ø¨Ù„Ø³", r: 1, t: "ÙŠØ§ Ø¬Ù…Ø§Ø¹Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ Ø²ÙØª! Ù‚Ø¹Ø¯Øª Ø§Ø³Ø¨ÙˆØ¹ Ø§Ø³ØªÙ†Ù‰." },
        { n: "Ù„ÙŠÙ„Ù‰ - Ø¨ÙŠØª Ù„Ø­Ù…", r: 4, t: "ÙƒÙ„Ùˆ ØªÙ…Ø§Ù… ÙˆØ§Ù„Ø´Ù†Ø·Ø© Ø¨ØªØ¬Ù†Ù† Ø¨Ø³ ÙŠØ§ Ø±ÙŠØª ØªØ±Ø¯ÙˆØ§ Ø£Ø³Ø±Ø¹." },
        { n: "Ù…Ø­Ù…ÙˆØ¯ - Ø¬Ù†ÙŠÙ†", r: 5, t: "Ø¨Ø¶Ø§Ø¹Ø© ÙØ®Ù…Ø© ÙˆØªØ¹Ø§Ù…Ù„ Ø£Ø±Ù‚Ù‰ØŒ Ø´ÙƒØ±Ø§Ù‹ OARA." },
        { n: "Ø§Ø¨Ùˆ ØµØ¨Ø­ÙŠ - Ø·ÙˆÙ„ÙƒØ±Ù…", r: 5, t: "Ø§Ø´ÙŠ Ø¨Ø¬Ù…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø±Ø¨ØŒ Ø§Ù„Ù„Ù‡ ÙŠØ¨Ø§Ø±ÙƒÙ„ÙƒÙˆØ§ Ø¨Ø­Ù„Ø§Ù„ÙƒÙ…." },
        { n: "Ø¨Ø§Ø³Ù… - ØµÙØ¯", r: 5, t: "ÙˆØ§Ù„Ù„Ù‡ Ø§Ù†ÙƒÙ… ÙƒÙÙˆØŒ Ø§Ù„Ø³Ø§Ø¹Ø© Ø®Ø±Ø§ÙÙŠØ© ÙˆØ¨ØªØ³ØªØ§Ù‡Ù„." },
        { n: "Ø¥Ø®Ù„Ø§Øµ - ØºØ²Ø©", r: 5, t: "ÙŠØ³Ù„Ù…Ùˆ Ø¯ÙŠØ§ØªÙƒÙ…ØŒ Ø·Ù„Ø¨ÙŠØªÙŠ ÙˆØµÙ„Øª Ø±ØºÙ… ÙƒÙ„ Ø§Ù„Ø¸Ø±ÙˆÙ." },
        { n: "Ù†ÙˆØ± - Ø£Ù… Ø§Ù„ÙØ­Ù…", r: 5, t: "Ù…Ù…ØªØ§Ø²ÙŠÙ†ØŒ Ø§Ù„ØªØºÙ„ÙŠÙ Ù…Ù„ÙƒÙŠ ÙˆØ§Ù„Ù…Ù†ØªØ¬ Ø£ØµÙ„ÙŠ." },
        { n: "Ø¯Ø¹Ø§Ø¡ - Ø¨Ø¯ÙŠØ§", r: 5, t: "ÙŠØ³Ù„Ù…Ùˆ Ø§ÙŠØ¯ÙŠÙƒÙ… Ø¹Ù„Ù‰ Ø§Ù„Ù…ØµØ¯Ø§Ù‚ÙŠØ© ÙˆØ§Ù„Ø³Ø±Ø¹Ø©ØŒ Ø§Ù„Ø¹Ø·Ø± Ø¨Ø®Ø¨Ù„." },
        { n: "ÙØ§Ø±Ø³ - Ø§Ù„Ù†Ù‚Ø¨", r: 5, t: "ÙƒÙÙˆ ÙˆØ§Ù„Ù„Ù‡ØŒ Ø§Ù„Ø³Ø§Ø¹Ø© Ø¨ØªØ¬Ù†Ù† ÙˆØªØ­ÙŠØ© Ù…Ù† Ø£Ù‡Ù„ Ø§Ù„Ù†Ù‚Ø¨." },
        { n: "Ø­Ù…Ø²Ø© - Ø§Ù„Ù…Ø«Ù„Ø«", r: 1, t: "Ø£Ø³Ø¹Ø§Ø±ÙƒÙ… ØºØ§Ù„ÙŠØ© ÙˆØ§Ù„ØªÙˆØµÙŠÙ„ Ø¨Ø·ÙŠØ¡." },
        { n: "Ø£Ù…Ù„ - Ø§Ù„Ø±Ù…Ù„Ø©", r: 5, t: "Ø¨Ø¶Ø§Ø¹Ø© Ø±ÙˆØ¹Ø© ÙˆØªØ¹Ø§Ù…Ù„ Ø£Ø±ÙˆØ¹ØŒ Ø§Ù„ØªÙˆØµÙŠÙ„ ÙƒØ§Ù† Ø³Ø±ÙŠØ¹." },
        { n: "Ø³Ù„ÙŠÙ…Ø§Ù† - Ø§Ù„Ù†ØµØ±", r: 5, t: "Ø¨Ø¶Ø§Ø¹Ø© Ø¨ØªØ¬Ù…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø±Ø¨ØŒ ÙØ®Ø§Ù…Ø© ÙˆØ¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©." },
        { n: "ØªÙ‡Ø§Ù†ÙŠ - Ø§Ù„Ù†ØµÙŠØ±Ø§Øª", r: 5, t: "Ø£Ø­Ù„Ù‰ Ù…ØªØ¬Ø± ÙÙŠ ÙÙ„Ø³Ø·ÙŠÙ†ØŒ Ø¨Ø¶Ø§Ø¹Ø© Ø¨ØªØ¬Ù†Ù†." },
        { n: "Ø±ÙˆØ§Ù† - Ø¨ÙŠØª Ù„Ø§Ù‡ÙŠØ§", r: 5, t: "ØªØºÙ„ÙŠÙ Ø£Ø­Ù„Ù‰ Ù…Ù† Ø§Ù„Ù…Ø§Ø±ÙƒØ§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©." },
        { n: "Ø³Ø¹Ø¯ - Ø³Ù„ÙÙŠØª", r: 5, t: "Ø¬ÙˆØ¯Ø© ÙˆØ³Ø¹Ø± ÙˆØ³Ø±Ø¹Ø©ØŒ Ø£Ù†ØªÙ… Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ®Ø§Ù…Ø©." },
        { n: "Ù„ÙŠØ§Ù† - Ù‚Ù„Ù‚ÙŠÙ„ÙŠØ©", r: 4, t: "Ø§Ù„Ø³Ø§Ø¹Ø© ÙØ®Ù…Ø© ÙƒØªÙŠØ± ÙˆØ§Ù„Ù„ÙˆÙ† Ø¨Ø¬Ù†Ù†." },
        { n: "ÙƒÙ…Ø§Ù„ - ÙŠØ¹Ø¨Ø¯", r: 1, t: "Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ù…Ø§ ÙƒØ§Ù† Ù…Ø­ØªØ±Ù… Ø¨Ø§Ù„ØªØ¹Ø§Ù…Ù„." },
        { n: "ÙØ¤Ø§Ø¯ - Ø³Ù„ÙˆØ§Ù†", r: 5, t: "ØªØ­ÙŠØ© Ù…Ù† Ø§Ù„Ù‚Ø¯Ø³ØŒ Ø¨Ø¶Ø§Ø¹Ø© Ù…Ù„ÙƒÙŠØ©." },
        { n: "ÙˆØ³ÙŠÙ… - Ø§Ù„Ù‚Ø¯Ø³", r: 1, t: "Ø§Ù„Ø®Ø¯Ù…Ø© Ø³ÙŠØ¦Ø© Ø¬Ø¯Ø§Ù‹ØŒ Ù…Ø§ Ø­Ø¯Ø§ Ø¨ÙŠØ±Ø¯." },
        { n: "ÙØ§Ø¯ÙŠØ© - Ø±ÙÙŠØ¯ÙŠØ§", r: 5, t: "Ø£ÙˆÙ„ Ù…Ø±Ø© Ø¨Ø·Ù„Ø¨ ÙˆØ±Ø§Ø­ Ø£ÙƒØ±Ø±Ù‡Ø§ØŒ Ø°ÙˆÙ‚ ÙˆØ£Ø¯Ø¨." },
        { n: "Ø£Ù†Ø³ - Ø®Ø§Ù†ÙŠÙˆÙ†Ø³", r: 3, t: "Ø§Ù„Ø¬ÙˆØ¯Ø© Ù…Ù†ÙŠØ­Ø© Ø¨Ø³ Ø§ØªØ£Ø®Ø±ØªÙˆØ§ ÙÙŠ Ø§Ù„Ø±Ø¯." },
        { n: "ÙŠÙˆØ³Ù - Ø§Ù„Ù„Ø¯", r: 4, t: "ØªØ¬Ø±Ø¨Ø© ÙƒÙˆÙŠØ³Ø© Ø¨Ø³ Ø§ØªØ£Ø®Ø±ØªÙˆØ§ Ø´ÙˆÙŠ Ø¨Ø§Ù„ØªØ­Ø¶ÙŠØ±." },
        { n: "Ø¹Ø¨ÙŠØ± - Ø§Ù„Ù…ØºØ§Ø²ÙŠ", r: 1, t: "Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§ØªØ£Ø®Ø± 12 ÙŠÙˆÙ…!" },
        { n: "Ù‚Ø§Ø³Ù… - Ø§Ù„Ø¨Ø±ÙŠØ¬", r: 4, t: "ÙƒÙˆÙŠØ³ÙŠÙ† Ø¨Ø³ Ù„Ø§Ø²Ù… ØªØ­Ø³Ù†ÙˆØ§ Ø§Ù„Ø±Ø¯." },
        { n: "Ø¹ØµØ§Ù… - Ø¨ÙŠØª Ø­Ø§Ù†ÙˆÙ†", r: 1, t: "Ø§Ù„Ø®Ø§Ù…Ø© Ù…Ø´ Ø²ÙŠ Ù…Ø§ ØªÙˆÙ‚Ø¹Øª." },
        { n: "Ù‡ÙŠØ§ - Ø·ÙˆØ¨Ø§Ø³", r: 5, t: "ÙŠØ³Ù„Ù…Ùˆ Ø¥ÙŠØ¯ÙŠÙƒÙ…ØŒ Ø§Ù„Ø·Ù„Ø¨ÙŠØ© ÙˆØµÙ„Øª Ø¨ØªØ¬Ù†Ù†." },
        { n: "Ù…Ù†ØªØµØ± - Ø±Ø§Ù… Ø§Ù„Ù„Ù‡", r: 2, t: "Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© Ù†Øµ Ù†ØµØŒ Ø§Ù„ØªØºÙ„ÙŠÙ ÙƒØ§Ù† Ù…Ù…Ø²Ø¹." },
        { n: "ØµÙ„Ø§Ø­ - ÙŠØ§ÙØ§", r: 1, t: "Ø¨Ø¹ØªÙˆÙ„ÙŠ Ù„ÙˆÙ† ØºÙ„Ø· ÙˆØªØ£Ø®Ø±ÙˆØ§ ÙƒØªÙŠØ±." },
        { n: "Ù…Ù†Ù‰ - Ø§Ù„Ù†Ø§ØµØ±Ø©", r: 4, t: "Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙƒÙˆÙŠØ³Ø© Ø¨Ø³ Ø§Ù„Ø³Ø¹Ø± Ù…Ø±ØªÙØ¹." },
        { n: "Ø¥ÙŠØ§Ø¯ - Ø¯ÙˆØ±Ø§", r: 5, t: "Ø¹Ø´ØªÙˆØ§ ÙŠØ§ Ø´Ø¨Ø§Ø¨ Ø¨Ø¶Ø§Ø¹Ø© Ø¨ØªØ¬Ù†Ù†." },
        { n: "Ø²ÙŠØ¯ - Ù‚Ù„Ù†Ø³ÙˆØ©", r: 2, t: "Ù…Ø§ Ø­Ø¨ÙŠØª Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù†Ø§Ø´ÙÙŠÙ† Ø´ÙˆÙŠ." },
        { n: "Ø´Ø§Ø¯ÙŠ - Ø¬Ø¨Ø§Ù„ÙŠØ§", r: 2, t: "ØªØ£Ø®ÙŠØ± ÙÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„ Ù„ØºØ²Ø©." },
        { n: "Ø£Ù…ÙŠØ±Ø© - Ø§Ù„ÙˆØ³Ø·Ù‰", r: 5, t: "Ø§Ù„Ø±ÙŠØ­Ø© Ø¨ØªØ¬Ù†Ù† ÙˆÙƒÙ„ Ø´ÙŠ Ù…Ø±ØªØ¨." },
        { n: "Ø¬Ù…Ø§Ù„ - Ø¨Ø¦Ø± Ø§Ù„Ø³Ø¨Ø¹", r: 1, t: "Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØµÙ„ Ù…ÙƒØ³ÙˆØ±." },
        { n: "Ø¨Ø±Ø§Ø¡ - Ø·ÙˆØ¨Ø§Ø³", r: 5, t: "ØªØ¹Ø§Ù…Ù„ Ø±Ø§Ù‚ÙŠ ÙˆØ³Ø±Ø¹Ø© ÙÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„." },
        { n: "Ø³Ø§Ù…Ø± - Ø¹ÙƒØ§", r: 5, t: "ÙØ®Ø§Ù…Ø© Ø§Ù„Ø§Ø³Ù… ØªÙƒÙÙŠ." },
        { n: "Ù†Ø¯Ù‰ - Ø­ÙŠÙØ§", r: 5, t: "Ø§Ù„Ø¹Ø·Ø± Ø«Ø¨Ø§ØªÙ‡ Ø±Ù‡ÙŠØ¨ ÙˆØ§Ù„Ù„Ù‡." }
    ];

    /* 3. Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© */
    async function fetchProducts() {
        try {
            const res = await fetch(SHEET_URL + '&cb=' + Math.random());
            const text = await res.text();
            const data = JSON.parse(text.substring(47).slice(0, -2));
            allProducts = data.table.rows.map(r => ({
                name: r.c[0] ? String(r.c[0].v).trim() : '',
                price: r.c[1] ? Number(r.c[1].v) : 0,
                img: r.c[2] ? String(r.c[2].v).trim() : '',
                cat: r.c[3] ? String(r.c[3].v).trim() : ''
            }));
            window.renderMainProducts(allProducts);
        } catch(e) { showToast("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³Ø­Ø§Ø¨Ø© âŒ"); }
    }

    window.renderMainProducts = function(list) {
        const container = document.getElementById('main-products');
        if(!container) return;
        container.innerHTML = list.slice(0, 10).map(p => `
            <div class="card-luxury">
                <img src="${p.img}" onerror="this.src='https://via.placeholder.com/300'">
                <div style="padding:12px;">
                    <p style="font-weight:700; height:40px; overflow:hidden; margin:0;">${p.name}</p>
                    <p style="color:var(--gold); font-weight:900; margin:10px 0;">${p.price} ILS</p>
                    <button class="btn-gold" style="width:100%;" onclick="window.addToCart('${p.name}', ${p.price})">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø© ğŸ›’</button>
                </div>
            </div>
        `).join('');
    }

    window.openCategory = function(catName) {
        const filtered = allProducts.filter(p => p.cat === catName || (catName === "Ø³Ø§Ø¹Ø§Øª" && p.cat.includes("Ø³Ø§Ø¹Ø©")));
        document.getElementById('home-view').style.display = 'none';
        if(document.getElementById('temp-page')) document.getElementById('temp-page').remove();
        
        let tp = document.createElement('div');
        tp.id = 'temp-page';
        tp.innerHTML = `
            <div style="background:#111; padding:25px; text-align:center; border-bottom:1px solid var(--gold);">
                <h2 style="margin:0; color:var(--gold);">Ù‚Ø³Ù… ${catName}</h2>
            </div>
            <div class="product-grid">
                ${filtered.length ? filtered.map(p => `
                    <div class="card-luxury">
                        <img src="${p.img}">
                        <div style="padding:12px;">
                            <p style="font-weight:700;">${p.name}</p>
                            <p style="color:var(--gold); font-weight:900;">${p.price} ILS</p>
                            <button class="btn-gold" style="width:100%;" onclick="window.addToCart('${p.name}', ${p.price})">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
                        </div>
                    </div>`).join('') : '<p style="grid-column:1/3; text-align:center; padding:100px; opacity:0.5;">Ø³ÙŠØªÙ… ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>'}
            </div>
            <button class="btn-gold" onclick="window.goHome()" style="margin:40px auto; display:block; width:80%;">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        `;
        document.body.appendChild(tp);
        window.scrollTo(0,0);
        if(document.getElementById('sidebar').classList.contains('active')) toggleSidebar();
    }

    window.addToCart = function(n, p) {
        cart.push({name: n, price: p});
        window.updateCartUI();
        showToast("Ø£Ø¶ÙŠÙ Ù„Ù„Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© âœ…");
    }

    window.updateCartUI = function() {
        localStorage.setItem('oara_cart', JSON.stringify(cart));
        document.getElementById('cart-count').innerText = cart.length;
        let total = 0;
        const wrapper = document.getElementById('cart-items-wrapper');
        wrapper.innerHTML = cart.map((item, i) => {
            total += item.price;
            return `<div style="display:flex; justify-content:space-between; padding:15px; border-bottom:1px solid #1a1a1a; background:#080808; margin-bottom:5px; border-radius:8px;">
                <span>${item.name}</span>
                <span onclick="window.removeFromCart(${i})" style="color:#ff4d4d; cursor:pointer;">âœ•</span>
            </div>`;
        }).join('');
        document.getElementById('cart-total-price').innerText = total + " ILS";
    }

    window.removeFromCart = function(i) {
        cart.splice(i, 1);
        window.updateCartUI();
    }

    window.completeOrder = function() {
        if(!user) return window.openAuth();
        const city = document.getElementById('ship-city').value;
        const village = document.getElementById('ship-village').value;
        if(cart.length === 0 || !city || !village) return showToast("âš ï¸ Ø£ÙƒÙ…Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø­Ù†!");
        
        let msg = `*Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù…ØªØ¬Ø± OARA*%0A` +
                  `----------------------------%0A` +
                  `*Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:* ${cart.map(i=>i.name).join(', ')}%0A` +
                  `*Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:* ${document.getElementById('cart-total-price').innerText}%0A` +
                  `----------------------------%0A` +
                  `*Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø²Ø¨ÙˆÙ†:*%0A` +
                  `â€¢ Ø§Ù„Ù‡Ø§ØªÙ: ${user.tel}%0A` +
                  `â€¢ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${city} - ${village}`;
        window.open(`https://wa.me/972568486065?text=${msg}`);
        cart=[]; window.updateCartUI(); toggleCart();
    }

    window.liveSearch = function() {
        const q = document.getElementById('main-search').value.toLowerCase();
        if(!q) { window.renderMainProducts(allProducts); return; }
        const f = allProducts.filter(p => p.name.toLowerCase().includes(q) || p.cat.toLowerCase().includes(q));
        window.renderMainProducts(f);
    }

    window.renderReviews = function() {
        document.getElementById('home-view').style.display = 'none';
        if(document.getElementById('temp-page')) document.getElementById('temp-page').remove();
        let tp = document.createElement('div');
        tp.id = 'temp-page';
        tp.innerHTML = `
            <div style="padding:20px;">
                <h2 style="text-align:center; color:var(--gold); margin-bottom:30px;">Ø¢Ø±Ø§Ø¡ Ø§Ù„Ù†Ø®Ø¨Ø© â­</h2>
                <div id="reviews-list">
                    ${allReviews.map(r => `
                        <div style="border-bottom:1px solid #1a1a1a; padding:20px 0;">
                            <div style="display:flex; justify-content:space-between;">
                                <strong style="color:var(--gold);">${r.n}</strong>
                                <span>${"â­".repeat(r.r)}</span>
                            </div>
                            <p style="font-size:14px; opacity:0.8; margin-top:8px;">${r.t}</p>
                        </div>`).join('')}
                </div>
                <button class="btn-gold" onclick="window.goHome()" style="margin:40px auto; display:block; width:80%;">ğŸ”™ Ø¹ÙˆØ¯Ø©</button>
            </div>`;
        document.body.appendChild(tp);
        window.scrollTo(0,0);
        toggleSidebar();
    }

    window.goHome = function() {
        if(document.getElementById('temp-page')) document.getElementById('temp-page').remove();
        document.getElementById('home-view').style.display = 'block';
    }

    window.toggleSidebar = function() { document.getElementById('sidebar').classList.toggle('active'); }
    window.toggleCart = function() { 
        const c = document.getElementById('cart-sidebar');
        if(c.style.left === '0px') { c.style.left = '-320px'; } 
        else { c.style.left = '0px'; c.style.right = 'auto'; }
    }

    window.openAuth = function() { document.getElementById('auth-modal').style.display = 'block'; }
    window.closeAuth = function() { document.getElementById('auth-modal').style.display = 'none'; }
    window.submitAuth = function() {
        const email = document.getElementById('user-email').value;
        const tel = document.getElementById('user-tel').value;
        if(!email || !tel) return showToast("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!");
        user = { email, tel };
        localStorage.setItem('oara_user', JSON.stringify(user));
        window.closeAuth();
        showToast("Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… OARA âœ…");
    }

    function showToast(m) {
 
